(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{167:function(t,n,e){"use strict";e.r(n);var s=e(0),r=Object(s.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"content"},[e("h1",{attrs:{id:"微信小程序要求的-tls-版本必须大于等于-1-2-https"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#微信小程序要求的-tls-版本必须大于等于-1-2-https","aria-hidden":"true"}},[t._v("#")]),t._v(" 微信小程序要求的 TLS 版本必须大于等于 1.2+https")]),t._v(" "),e("h2",{attrs:{id:"_1-环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-环境","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.环境")]),t._v(" "),e("p",[t._v("Ubuntu 16.04 64位")]),t._v(" "),e("p",[t._v("openssl    1.0.2")]),t._v(" "),e("p",[t._v("nginx    1.10.3")]),t._v(" "),e("h2",{attrs:{id:"_2-背景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-背景","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.背景")]),t._v(" "),e("p",[t._v("1、请求域名在request合法域名中")]),t._v(" "),e("p",[t._v("2、基于 https 协议")]),t._v(" "),e("p",[t._v("3、TLS 版本 1.2+")]),t._v(" "),e("h2",{attrs:{id:"_3-解决方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-解决方法","aria-hidden":"true"}},[t._v("#")]),t._v(" 3.解决方法")]),t._v(" "),e("p",[t._v("配置 nginx.conf文件  ，然后 nginx -s reload重启")]),t._v(" "),e("p",[t._v("贴上部分配置内容：")]),t._v(" "),e("p",[t._v("#https")]),t._v(" "),e("pre",[e("code",[t._v("server {\n\n    listen 443;\n\n    server_name   101.132.109.211;\n\n    ssl on;\n\n    root    /var/www/html/xyzan/index-wx.html;\n\n    index   index.html;\n\n    ssl_certificate  cert/214445830400499.pem;\n\n    ssl_certificate_key  cert/214445830400499.key;\n\n    ssl_session_timeout 5m;\n\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;                                                                                #按照这个协议配置\n\n    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;           #按照这个套件配置\n\n    ssl_prefer_server_ciphers on;\n\n    location / {\n\n        root html;\n\n        index index.html index.htm;\n\n        proxy_pass  http://101.132.109.211:3000;\n\n    }\n\n}\n")])]),t._v(" "),e("h2",{attrs:{id:"_4-检测"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-检测","aria-hidden":"true"}},[t._v("#")]),t._v(" 4.检测")]),t._v(" "),e("p",[t._v("访问 https://cloud.tencent.com/product/ssl#userDefined10 ，输入域名，检查ATS 检测是否通过，注意nginx需要重启")]),t._v(" "),e("p",[t._v("我的小程序：胡说8道")])])}],!1,null,null,null);n.default=r.exports}}]);